{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/img/caution.svg","../src/img/imgok.svg","../src/img/hello.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport let currentPage = 1;\nexport const perPage = 15;\n\nexport async function getPhotos(q, currentPage) {\n  const options = {\n    params: {\n      key: '44033528-44943d254def6182670dcc208',\n      q,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: currentPage,\n      per_page: perPage,\n    },\n  };\n  const response = await axios.get('', options);\n  return response.data;\n}\n","function imageTemplate({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery\">\n      <a href=${largeImageURL}>\n        <img src=${webformatURL} alt=\"${tags}\" />\n        <div class=\"info\">\n        <div class=\"info-rating\">\n        <h3>Likes</h3>\n        <p>${likes}</p>\n        </div>\n        <div class=\"info-rating\">\n        <h3>Views</h3>\n        <p>${views}</p>\n        </div>\n        <div class=\"info-rating\">\n        <h3>Comments</h3>\n        <p>${comments}</p>\n        </div>\n        <div class=\"info-rating\">\n        <h3>Downloads</h3>\n        <p>${downloads}</p>\n        </div>\n        </div>\n        </a>\n    </li>`;\n}\n\nexport function imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","export default \"__VITE_ASSET__02852ca5__\"","export default \"__VITE_ASSET__1f4398b1__\"","export default \"__VITE_ASSET__37883dd9__\"","import { getPhotos, currentPage, perPage } from './js/pixabay-api.js';\nimport { imagesTemplate } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport iconEr from './img/error.svg';\nimport iconWarn from './img/caution.svg';\nimport iconOk from './img/imgok.svg';\nimport iconHello from './img/hello.svg';\n\nconst formEl = document.querySelector('.js-form');\nconst galleryEl = document.querySelector('.js-gallery-list');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.js-load-more');\nconst loadText = document.querySelector('.js-text-load');\n\nconst lightbox = new SimpleLightbox('.gallery a');\nlet loadPage = currentPage;\nlet searchQuery = null;\nlet maxPages = 1;\n\nformEl.addEventListener('submit', onSubmit);\nloadBtn.addEventListener('click', onClick);\ndocument.addEventListener('DOMContentLoaded', hello);\n\nasync function onSubmit(e) {\n  e.preventDefault();\n\n  searchQuery = e.currentTarget.elements.search.value.trim();\n\n  if (searchQuery === '') {\n    hideLoadBtn();\n    return showError('Sorry, the input field cannot be empty!');\n  }\n\n  showLoading();\n\n  try {\n    loadPage = 1;\n    const result = await getPhotos(searchQuery, loadPage);\n\n    if (result.hits.length === 0) {\n      hideLoadBtn();\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n    if (result.totalHits !== 0) {\n      showMessage(`We found ${result.totalHits} images for your request!`);\n    }\n\n    galleryEl.innerHTML = imagesTemplate(result.hits);\n\n    maxPages = Math.ceil(result.totalHits / perPage);\n\n    result.totalHits < 15 ? hideLoadBtn() : showLoadBtn();\n\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoading();\n    e.target.reset();\n  }\n}\n\nasync function onClick(e) {\n  loadPage += 1;\n  loader.classList.remove('visually-hidden');\n  hideLoadBtn();\n  showLoading();\n\n  try {\n    const result = await getPhotos(searchQuery, loadPage);\n\n    galleryEl.insertAdjacentHTML('beforeend', imagesTemplate(result.hits));\n\n    lightbox.refresh();\n\n    if (loadPage === maxPages) {\n      showCaution(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoading();\n    if (loadPage !== maxPages) {\n      showLoadBtn();\n    }\n    loader.classList.add('visually-hidden');\n    scrollPage();\n  }\n}\n\nfunction showLoadBtn() {\n  loadBtn.classList.remove('visually-hidden');\n}\n\nfunction hideLoadBtn() {\n  loadBtn.classList.add('visually-hidden');\n}\n\nfunction showLoading() {\n  loader.classList.remove('visually-hidden');\n  loadText.classList.remove('visually-hidden');\n}\nfunction hideLoading() {\n  loadText.classList.add('visually-hidden');\n  loader.classList.add('visually-hidden');\n}\n\nfunction showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    maxWidth: 360,\n    position: 'topRight',\n    iconUrl: iconEr,\n    backgroundColor: '#ef4040',\n    messageColor: '#fff',\n  });\n}\n\nfunction showMessage(message) {\n  iziToast.success({\n    title: 'OK',\n    message: message,\n    maxWidth: 360,\n    position: 'topRight',\n    iconUrl: iconOk,\n    backgroundColor: '#59a10d',\n    messageColor: '#fff',\n  });\n}\nfunction showCaution(message) {\n  iziToast.warning({\n    message: message,\n    maxWidth: 360,\n    position: 'topRight',\n    iconUrl: iconWarn,\n    backgroundColor: '#ffa000',\n    messageColor: '#fff',\n  });\n}\nfunction hello() {\n  iziToast.info({\n    message: 'Welcome to our website',\n    maxWidth: 360,\n    position: 'topRight',\n    iconUrl: iconHello,\n    backgroundColor: '#6c8cff',\n    messageColor: '#fff',\n  });\n}\nfunction scrollPage() {\n  const pictureHeight =\n    galleryEl.firstElementChild.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: pictureHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["axios","currentPage","perPage","getPhotos","q","options","imageTemplate","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesTemplate","images","iconEr","iconWarn","iconOk","iconHello","formEl","galleryEl","loader","loadBtn","loadText","lightbox","SimpleLightbox","loadPage","searchQuery","maxPages","onSubmit","onClick","hello","e","hideLoadBtn","showError","showLoading","result","showMessage","showLoadBtn","error","hideLoading","showCaution","scrollPage","message","iziToast","pictureHeight"],"mappings":"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"}